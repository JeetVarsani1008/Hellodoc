@model DAL.ViewModelProvider.TimeSheetModel;
@{
    Layout = "~/Views/Shared/Provider/_LayoutProviderDashboard.cshtml";
}

<head>
    <style>
        input[type=checkbox] {
            transform: scale(1.5);
        }
    </style>
</head>
<div class="container">
    <div class="d-flex justify-content-end mb-3">
        <button class="btn btn-outline-info" onclick="window.location.href='@Url.Action("Invoicing","Provider")'">&lt; Back</button>
    </div>

    <div id="finalizetable"></div>
    <div class="table-responsive">
        @if(Model.CheckData != 1)
        {
            <form asp-controller="Provider" asp-action="SubmitTimesheet" method="post" enctype="multipart/form-data">
                <table class="table">
                    <thead class="table-active">
                        <tr>
                            <td>Date</td>
                            <td>Oncall Hours</td>
                            <td width="15%">Total Hours</td>
                            <td class="text-center">Weekend/Holidays</td>
                            <td>Number Of Housecalls</td>
                            <td>Number Phone Consults</td>
                        </tr>
                    </thead>
                    <tbody>
                        @for (var i = 0; i < Model.TimeSheetList.Count; i++)
                        {
                            <tr>
                                <td>@Model.TimeSheetList[i].Date <input type="hidden" asp-for="TimeSheetList[i].Date" /></td>
                                <td>@Model.TimeSheetList[i].OnCallHours <input type="hidden" asp-for="TimeSheetList[i].OnCallHours" /></td>
                                <td>
                                    <input class="form-control w-100" type="number" placeholder="0" asp-for="TimeSheetList[i].TotalHours" />
                                </td>
                                <td class="text-center">
                                    <input type="checkbox" asp-for="TimeSheetList[i].IsWeekend" />
                                </td>
                                <td>
                                    <input class="form-control w-50" type="number" asp-for="TimeSheetList[i].NoOfHouseCalls" />
                                </td>
                                <td>
                                    <input class="form-control w-50" type="number" asp-for="TimeSheetList[i].NoOfPhoneConsults" />
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="d-flex justify-content-end">
                    <button class="btn btn-info" name="operation" value="submit" type="submit">Submit</button>
                </div>
            </form>
        }
        else
        {
            <p class="h3">Please Select Duration</p>
        }
        <div class="d-flex justify-content-start ">
            <button class="btn btn-info" onclick="toggleReceiptSection()">Add Receipts</button>
        </div>


        @if (Model.CheckData != 1)
        {
            <div class="table-responsive mt-3" id="billDetails">
                <table class="table">
                    <thead class="table-active">
                        <tr>
                            <td>Date</td>
                            <td>Item</td>
                            <td>Amount</td>
                            <td>Bill</td>
                            <td class="d-flex justify-content-center">Action</td>
                        </tr>
                    </thead>
                    <tbody>
                        @for (var i = 0; i < Model.TimeSheetList.Count; i++)
                        {
                            <tr>
                                <td>@Model.TimeSheetList[i].Date <input type="hidden" asp-for="TimeSheetList[i].Date" /></td>
                                <td><input type="number" class="form-control w-50" /></td>
                                <td><input type="number" class="form-control w-50" /></td>
                                <td>
                                    @if (Model.TimeSheetList[i].BillName == null)
                                    {
                                        <div class="d-flex">
                                            <button class="btn btn-info d-flex"><i class="bi bi-cloud-upload"></i>Upload</button>
                                            <input type="file" class="form-control w-50" />
                                        </div>
                                    }
                                    else
                                    {
                                        @Model.TimeSheetList[i].BillName
                                    }
                                </td>
                                <td>
                                    @if(Model.TimeSheetList[i].BillName != null)
                                    {
                                        <div class="d-flex justify-content-center">
                                            <button class="btn btn-outline-info me-2">Edit</button>
                                            <button class="btn btn-outline-info me-2">Delete</button>
                                            <button class="btn btn-outline-info">View</button>
                                        </div>
                                    }
                                    else
                                    {
                                        <div></div>
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="h5">Select Time Duration</div>
        }
    </div>
</div>


<script>
    function toggleReceiptSection() {
        console.log('toggle');
        $('#billDetails').toggle();
    }
</script>