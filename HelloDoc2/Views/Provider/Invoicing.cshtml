@model DAL.ViewModelProvider.TimeSheetModel;@{    if (Model.IsAdmin == true)    {
        Layout = "~/Views/Shared/_LayoutMainAdminDashboard.cshtml";        ViewBag.Provider = "Active";    }    else    {
        Layout = "~/Views/Shared/Provider/_LayoutProviderDashboard.cshtml";        ViewBag.Invoicing = "Active";    }}<input type="hidden" asp-for="IsAdmin" id="IsAdmin" /><div class="heading justify-content-between d-flex my-3 container">    <h3>Timesheets</h3></div><div class="box1">    <div class="headitem container">        <div class="d-flex justify-content-between ">            @if (Model.IsAdmin == true)            {                <select asp-for="PhysicianId" onchange="showTimeSheet()" class="form-select form-control" id="physicianId" style="width:300px" required>                    @foreach (var r in Model.PhysicianList)                    {                        <option value="@r.PhysicianId">@r.FirstName @r.LastName</option>                    }                    <label for="physicianId" class="labels form-label ms-3">Physician</label>                </select>            }            <select asp-for="SelectedPeriod" onchange="showTimeSheet()" class="form-select form-control" id="period" style="width:300px" required>                <option selected value="">Select Timesheet period</option>                @foreach (var r in Model.PeriodList)                {                    <option value="@r.StartDate*@r.EndDate">@r.StartDate - @r.EndDate</option>                }                <label for="period" class="labels form-label ms-3" style="font-size:15px">Timesheet period</label>            </select>            @if (Model.IsFinalized != true && Model.IsAdmin != true)            {                <button onclick="selectedPeriod('finalize')" type="button" class="btn btn-outline-info p-2 fw-bold">Finalize Timesheet</button>            }        </div>    </div>      @if (Model.IsAdmin == true && (Model.Status == 1 || Model.Status == null))    {        @if (Model.IsFinalized == true)        {            <div class="container">                <table class="table">                    <thead>                        <tr>                            <th scope="col">StartDate</th>                            <th scope="col">EndDate</th>                            <th scope="col" width="8%">Status</th>                            <th scope="col" class="text-center">Action</th>                        </tr>                    </thead>                    <tbody>                        <tr>                            <td>@Model.SelectedStartDate</td>                            <td>@Model.SelectedEndDate</td>                            <td class="text-center">                                @if (Model.Status == 1)                                {                                    <span>Pending</span>                                }                                else if (Model.Status == 2)                                {                                    <span>Approved</span>                                }                            </td>                            <td class="text-center">                                <button onclick="selectedPeriod('approve')" type="button" class="btn btn-outline-info p-2">Approve</button>                            </td>                        </tr>                    </tbody>                </table>            </div>        }        else        {            <div class="container">
                <p class="p-4">Physician has not finalized the timesheet in specified time period</p>            </div>        }    }    else if (Model.Status == 2)    {        if (Model.TimeSheetList == null)        {            <div class="container">                <h5 class="p-4">No Record(s) Found</h5>
            </div>        }        else        {            <div class="table-responsive container">                <table class="table">                    <thead>                        <tr>                            <th scope="col">ShiftDate</th>                            <th scope="col" width="10%">Night Shift Weekend</th>                            <th scope="col" width="8%">Housecall</th>                            <th scope="col" width="8%">HouseCall Nights Weekend</th>                            <th scope="col" class="text-center">Phone Consults</th>                            <th scope="col" width="10%" class="text-center">PhoneConsults Nights Weekend</th>                            <th scope="col">Batch Testing</th>                        </tr>                    </thead>                    <tbody>                        @for (int r = 0; r < Model.TimeSheetList.Count; r++)                        {                            <tr>                                <td>@Model.TimeSheetList[r].Date</td>                                <td>0</td>                                <td>                                    @Model.TimeSheetList[r].NoOfHouseCalls                                </td>                                <td>                                    @Model.TimeSheetList[r].NightWeekendHouseCall                                </td>                                <td class="text-center">@Model.TimeSheetList[r].NoOfPhoneConsults </td>                                <td class="text-center">                                    @Model.TimeSheetList[r].NightWeekendPhoneConsult                                </td>                                <td>0</td>                            </tr>                        }                    </tbody>                </table>            </div>        }    }    else    {        if (Model.TimeSheetList == null)        {            <div class="container">                <h5 class="p-4">No Record(s) Found</h5>
            </div>        }        else        {            <div class="table-responsive container">                <table class="table">                    <thead>                        <tr>                            <th scope="col">ShiftDate</th>                            <th scope="col" width="10%">Night Shift Weekend</th>                            <th scope="col" width="8%">Housecall</th>                            <th scope="col" width="8%">HouseCall Nights Weekend</th>                            <th scope="col" class="text-center">Phone Consults</th>                            <th scope="col" width="10%" class="text-center">PhoneConsults Nights Weekend</th>                            <th scope="col">Batch Testing</th>                        </tr>                    </thead>                    <tbody>                        @for (int r = 0; r < Model.TimeSheetList.Count; r++)                        {                            <tr>                                <td>@Model.TimeSheetList[r].Date</td>                                <td>0</td>                                <td>                                    @Model.TimeSheetList[r].NoOfHouseCalls                                </td>                                <td>                                    @Model.TimeSheetList[r].NightWeekendHouseCall                                </td>                                <td class="text-center">@Model.TimeSheetList[r].NoOfPhoneConsults </td>                                <td class="text-center">                                    @Model.TimeSheetList[r].NightWeekendPhoneConsult                                </td>                                <td>0</td>                            </tr>                        }                    </tbody>                </table>            </div>        }    }</div>      @* ---------- TIME SHEET REIMBURSEMENT ---------   *@    @if (Model.IsAdmin == true && Model.Status != 2)    {    }    else    {        <div class="box1 mt-3">            <div class="mt-3 mb-5 px-2 pb-1 container">                <span class="fw-bold fs-5 mx-3">Timesheet Reimbursement</span>                @if (Model.IsAnyBillPresent != true || Model.TimeSheetList == null)                {                    <div class="container">                        <h5 class="p-4">No Record(s) Found</h5>
                    </div>                }                else                {                    <div class="table-responsive">                        <table class="table">                            <thead>                                <tr>                                    <th scope="col" width="12%">Date</th>                                    <th scope="col" width="15%">Item</th>                                    <th scope="col" width="8%">Amount</th>                                    <th scope="col" width="30%">Bill</th>                                    <th scope="col" class="text-center">Action</th>                                </tr>                            </thead>                            <tbody>                                @for (int r = 0; r < Model.TimeSheetList.Count; r++)                                {                                    @if (Model.TimeSheetList[r].BillName != null)                                    {                                        var billFilePath = Model.PhysicianId + Model.TimeSheetList[r].BillName;                                        <tr>                                            <td>@Model.TimeSheetList[r].Date</td>                                            <td>@Model.TimeSheetList[r].Item</td>                                            <td>                                                @Model.TimeSheetList[r].Amount                                            </td>                                            <td>                                                @Model.TimeSheetList[r].BillName                                            </td>                                            <td class="text-center">                                                <a href="~/PhysicianBillUploads/@billFilePath" target="_blank" class="fw-bold p-2 btn btn-outline-info">View</a>                                            </td>                                        </tr>                                    }                                }                            </tbody>                        </table>                    </div>                }            </div>        </div>    }<script>    function showTimeSheet() {        var period = $('#period').val();        var IsAdmin = $('#IsAdmin').val();        var physicianId = $('#physicianId').val();        $.ajax({            url: "/Provider/Invoicing",            type: "GET",            data: {                selectedDate: period,                physicianId: physicianId,                IsAdmin: IsAdmin,            },            success: function (result) {                document.documentElement.innerHTML = result;            },            error: function () {                alert('Error loading partial view');            },        });    }</script><script>    $(document).ready(function () {        var selectedDate = $('#period').val();        var IsAdmin = $('#IsAdmin').val();        var physicianId = $('#physicianId').val();        $.ajax({            url: "/Provider/Invoicing",            type: "GET",            data: {                selectedDate: selectedDate,                IsAdmin: IsAdmin,                physicianId: physicianId,            },            success: function (result) {                document.documentElement.innerHTML = result;            },            error: function () {                alert('Error loading partial view');            },        });    });</script><script>    function selectedPeriod(operation) {        var period = $('#period').val();        var operation = operation;        var physicianId = $('#physicianId').val();        $.ajax({            url: "/Provider/InvoicingFinalize",            type: "GET",            data: {                selectedDate: period,                operation: operation,                physicianId: physicianId,            },            success: function (result) {                document.documentElement.innerHTML = result;            },            error: function () {                alert('Error loading partial view');            },        });    }</script>